import { Button, Form, Input, Modal, message } from "antd";
import { useState } from "react";
import { postManualChatAPI } from "@/services/api";

const AskStaffForm = () => {
    const [open, setOpen] = useState(false);
    const [form] = Form.useForm();

    const handleSubmit = async (values: any) => {
        try {
            await postManualChatAPI(values);
            message.success("G·ª≠i c√¢u h·ªèi th√†nh c√¥ng! Nh√¢n vi√™n s·∫Ω li√™n h·ªá l·∫°i s·ªõm.");
            form.resetFields();
            setOpen(false);
        } catch (err) {
            message.error("ƒê√£ c√≥ l·ªói x·∫£y ra, vui l√≤ng th·ª≠ l·∫°i sau.");
        }
    };

    return (
        <>
            <Button type="primary" onClick={() => setOpen(true)}>
                G·∫∑p nh√¢n vi√™n
            </Button>

            <Modal
                open={open}
                title="üìû G·ª≠i y√™u c·∫ßu t·ªõi nh√¢n vi√™n h·ªó tr·ª£"
                onCancel={() => setOpen(false)}
                footer={null}
            >
                <Form form={form} layout="vertical" onFinish={handleSubmit}>
                    <Form.Item
                        label="H·ªç v√† t√™n"
                        name="name"
                        rules={[{ required: true, message: "Vui l√≤ng nh·∫≠p t√™n" }]}
                    >
                        <Input placeholder="Nguy·ªÖn VƒÉn A" />
                    </Form.Item>

                    <Form.Item
                        label="Email"
                        name="email"
                        rules={[
                            { required: true, message: "Vui l√≤ng nh·∫≠p email" },
                            { type: "email", message: "Email kh√¥ng h·ª£p l·ªá" },
                        ]}
                    >
                        <Input placeholder="email@example.com" />
                    </Form.Item>

                    <Form.Item
                        label="S·ªë ƒëi·ªán tho·∫°i"
                        name="phone"
                        rules={[{ required: true, message: "Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i" }]}
                    >
                        <Input placeholder="0123456789" />
                    </Form.Item>

                    <Form.Item
                        label="ƒê·ªãa ch·ªâ"
                        name="address"
                        rules={[{ required: true, message: "Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ" }]}
                    >
                        <Input placeholder="S·ªë 1 Nguy·ªÖn Tr√£i, H√† N·ªôi" />
                    </Form.Item>

                    <Form.Item
                        label="C√¢u h·ªèi / V·∫•n ƒë·ªÅ c·∫ßn h·ªó tr·ª£"
                        name="question"
                        rules={[{ required: true, message: "Vui l√≤ng nh·∫≠p c√¢u h·ªèi" }]}
                    >
                        <Input.TextArea rows={4} placeholder="T√¥i mu·ªën h·ªèi v·ªÅ ƒë∆°n h√†ng..." />
                    </Form.Item>

                    <Form.Item>
                        <Button type="primary" htmlType="submit">
                            G·ª≠i y√™u c·∫ßu
                        </Button>
                    </Form.Item>
                </Form>
            </Modal>
        </>
    );
};

export default AskStaffForm;
